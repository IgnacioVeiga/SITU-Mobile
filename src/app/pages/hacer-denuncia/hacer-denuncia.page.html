<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Hacer denuncia
    </ion-title>
    <ion-icon name="arrow-back" mode="ios" slot="end" size="large" (click)="goHome()"></ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-content>
      <ion-radio-group>
        <ion-list-header>
          <ion-label>Lugar del incidente</ion-label>
        </ion-list-header>

        <ion-item>
          <ion-label>Mi ubicación actual</ion-label>
          <ion-radio slot="start" value="ubicacionActual" (ionSelect)="otroLugar = false"></ion-radio>
        </ion-item>

        <!-- Falta agregar la opcion "Marcar en el mapa" -->

        <ion-item>
          <ion-label>Otro lugar</ion-label>
          <ion-radio slot="start" value="otroLugar" (ionSelect)="otroLugar = true"></ion-radio>
        </ion-item>
      </ion-radio-group>

      <ion-label class="mt-3" *ngIf="otroLugar">Calle y altura:</ion-label>
      <ion-item *ngIf="otroLugar">
        <ion-input type="text"></ion-input>
      </ion-item>
    </ion-card-content>
  </ion-card>


  <ion-card>
    <ion-card-content>
      <ion-radio-group>
        <ion-list-header>
          <ion-label>Fecha y hora</ion-label>
        </ion-list-header>

        <ion-item>
          <ion-label>Usar actual</ion-label>
          <ion-radio slot="start" value="FHactual" (ionSelect)="otraFH = false"></ion-radio>
        </ion-item>

        <ion-item>
          <ion-label>Otra</ion-label>
          <ion-radio slot="start" value="otraFH" (ionSelect)="otraFH = true"></ion-radio>
        </ion-item>
      </ion-radio-group>

      <ion-label class="mt-3" *ngIf="otraFH">Especifique:</ion-label>
      <ion-item *ngIf="otraFH">
        <ion-input type="date"></ion-input>
      </ion-item>
    </ion-card-content>
  </ion-card>


  <ion-card>
    <ion-card-content>
      <ion-item class="mb-2">
        <ion-label>Linea:</ion-label>
        <ion-input type="number"></ion-input>
      </ion-item>

      <ion-radio-group>
        <ion-list-header>
          <ion-label>Es un colectivo en especifico?</ion-label>
        </ion-list-header>

        <ion-item>
          <ion-label>No</ion-label>
          <ion-radio slot="start" value="noC" (ionSelect)="colectivoEspecifico = false" checked></ion-radio>
        </ion-item>

        <ion-item>
          <ion-label>Si</ion-label>
          <ion-radio slot="start" value="siC" (ionSelect)="colectivoEspecifico = true"></ion-radio>
        </ion-item>
      </ion-radio-group>

      <ion-item class="mt-3" *ngIf="colectivoEspecifico">
        <ion-label>Patente:</ion-label>
        <ion-input type="text"></ion-input>
      </ion-item>

      <ion-item *ngIf="colectivoEspecifico">
        <ion-label>Interno:</ion-label>
        <ion-input type="number"></ion-input>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-content>
      <!-- Nota importante: el atributo "disabled" lo dejé entre corchetes para que funcione en chrome por lo menos -->
      <ion-button color="primary" [disabled]="suficientesArchivos" (click)="cargarFoto()">Cargar fotos</ion-button>
      <br>
      <small>(Maximo 3 fotos y 5mb en total)</small>
      <br>

      <ion-row *ngIf="fotos.length > 0">
        <ion-col *ngFor="let foto of fotos" size="12">

          <ion-row>
            <ion-col size="3">
              <ion-thumbnail>
                <ion-img src="{{foto.miniatura}}" alt="miniatura"></ion-img>
              </ion-thumbnail>
            </ion-col>
            <ion-col size="9">
              {{foto.peso}}Mb
              <ion-icon class="pull-right" name="close" size="large" color="danger" (click)="descartarFoto(foto.id)"></ion-icon>
              <br>
              <small>{{foto.nombre}}{{foto.formato}}</small>
            </ion-col>
          </ion-row>

        </ion-col>
      </ion-row>

    </ion-card-content>
  </ion-card>

  <ion-label class="ml-2">Motivo:</ion-label>
  <ion-item class="mb-2">
    <ion-textarea placeholder="Describa el motivo de su denuncia"></ion-textarea>
  </ion-item>

  <ion-button color="primary" expand="block" (click)="denunciar()">Denunciar</ion-button>
  <ion-button color="medium" expand="block" (click)="goHome()">Cancelar</ion-button>
</ion-content>